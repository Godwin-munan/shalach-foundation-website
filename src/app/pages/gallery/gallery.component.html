<section id="gallery" class="main-gallery-container">
  <div
    class="min-h-screen bg-gradient-to-br from-slate-50 via-white to-teal-50"
  >
    <!-- Header Section -->
    <div
      class="relative overflow-hidden bg-gradient-to-r from-teal-600 to-purple-600 py-20 px-4"
    >
      <div class="absolute inset-0 bg-black/10"></div>
      <div class="relative max-w-7xl mx-auto text-center">
        <div class="inline-block animate-bounce mb-4">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="w-12 h-12 text-white fill-white"
            viewBox="0 0 24 24"
            fill="currentColor"
          >
            <path
              d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"
            ></path>
          </svg>
        </div>
        <h1
          class="text-5xl md:text-6xl font-bold text-white mb-4 animate-fade-in"
        >
          Our Impact Gallery
        </h1>
        <p class="text-xl text-white/90 max-w-2xl mx-auto">
          Witness the difference we're making together in communities around the
          world
        </p>
      </div>
    </div>

    <!-- Gallery Grid -->
    <div class="max-w-7xl mx-auto px-4 py-16">
      <div class="gallery-grid">
        <div
          *ngFor="let item of galleryImages; let i = index"
          class="group relative overflow-hidden rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500 cursor-pointer animate-slide-up"
          [class]="getGridSpan(i)"
          [ngStyle]="{ 'animation-delay': getAnimationDelay(i) }"
          (mouseenter)="setHoveredIndex(i)"
          (mouseleave)="setHoveredIndex(null)"
          (click)="openLightbox(item)"
        >
          <!-- Image -->
          <div class="relative overflow-hidden aspect-square">
            <img
              [src]="item.image"
              [alt]="item.title"
              class="w-full h-full object-cover transition-all duration-700"
              [class.scale-110]="hoveredIndex === i"
              [class.blur-sm]="hoveredIndex === i"
            />

            <!-- Gradient Overlay -->
            <div
              class="absolute inset-0 bg-gradient-to-t opacity-0 group-hover:opacity-90 transition-opacity duration-500"
              [ngClass]="item.color"
            ></div>

            <!-- Icon - appears on hover -->
            <div
              class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-all duration-500 scale-50 group-hover:scale-100"
            >
              <div class="bg-white rounded-full p-6 shadow-xl">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="w-12 h-12 text-teal-600"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <g *ngIf="item.icon === 'users'">
                    <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
                    <circle cx="9" cy="7" r="4"></circle>
                    <path d="M22 21v-2a4 4 0 0 0-3-3.87"></path>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                  </g>
                  <g *ngIf="item.icon === 'graduation-cap'">
                    <path d="M22 10v6M2 10l10-5 10 5-10 5z"></path>
                    <path d="M6 12v5c3 3 9 3 12 0v-5"></path>
                  </g>
                  <g *ngIf="item.icon === 'heart-pulse'">
                    <path
                      d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"
                    ></path>
                    <path d="M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27"></path>
                  </g>
                  <g *ngIf="item.icon === 'utensils'">
                    <path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"></path>
                    <path d="M7 2v20"></path>
                    <path
                      d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"
                    ></path>
                  </g>
                  <g *ngIf="item.icon === 'home'">
                    <path
                      d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"
                    ></path>
                    <polyline points="9 22 9 12 15 12 15 22"></polyline>
                  </g>
                  <g *ngIf="item.icon === 'smile'">
                    <circle cx="12" cy="12" r="10"></circle>
                    <path d="M8 14s1.5 2 4 2 4-2 4-2"></path>
                    <line x1="9" y1="9" x2="9.01" y2="9"></line>
                    <line x1="15" y1="9" x2="15.01" y2="9"></line>
                  </g>
                  <g *ngIf="item.icon === 'hand-heart'">
                    <path
                      d="M11 14h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 16"
                    ></path>
                    <path
                      d="m7 20 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9"
                    ></path>
                    <path d="m2 15 6 6"></path>
                    <path
                      d="M19.5 8.5c.7-.7 1.5-1.6 1.5-2.7A2.73 2.73 0 0 0 16 4a2.78 2.78 0 0 0-2 1 2.78 2.78 0 0 0-2-1 2.73 2.73 0 0 0-5 1.8c0 1.1.8 2 1.5 2.7L16 16Z"
                    ></path>
                  </g>
                  <g *ngIf="item.icon === 'tree'">
                    <path d="M12 13v8"></path>
                    <path d="m12 3 4 7h-8Z"></path>
                    <path d="m8 10 4 7h-8Z"></path>
                    <path d="m16 10-4 7h8Z"></path>
                  </g>
                </svg>
              </div>
            </div>

            <!-- Content - slides up on hover -->
            <div
              class="absolute bottom-0 left-0 right-0 p-6 transform translate-y-full group-hover:translate-y-0 transition-transform duration-500"
            >
              <h3 class="text-2xl font-bold text-white mb-2">
                {{ item.title }}
              </h3>
              <p class="text-white/90 text-sm">
                {{ item.description }}
              </p>
            </div>

            <!-- Subtle Title Always Visible -->
            <div
              class="absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/70 to-transparent group-hover:opacity-0 transition-opacity duration-500"
            >
              <h3 class="text-lg font-semibold text-white">
                {{ item.title }}
              </h3>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Lightbox Modal -->
    <div
      *ngIf="selectedImage"
      class="fixed inset-0 bg-black/95 z-50 flex items-center justify-center p-4 animate-fade-in"
      (click)="closeLightbox()"
    >
      <button
        class="absolute top-6 right-6 text-white hover:text-teal-400 transition-colors duration-300 z-10"
        (click)="closeLightbox()"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="w-10 h-10"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>

      <div
        class="max-w-5xl w-full animate-scale-in"
        (click)="$event.stopPropagation()"
      >
        <img
          [src]="selectedImage.image"
          [alt]="selectedImage.title"
          class="w-full h-auto rounded-2xl shadow-2xl"
        />
        <div class="mt-6 text-center">
          <h2 class="text-3xl font-bold text-white mb-3">
            {{ selectedImage.title }}
          </h2>
          <p class="text-xl text-gray-300">
            {{ selectedImage.description }}
          </p>
        </div>
      </div>
    </div>
  </div>
</section>
